<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retail Intranet - SharePoint Maven</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }

        /* Main Content */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0;
        }

        .description {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .description p {
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .description a {
            color: #0078d4;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #1e5631, #2d7a47);
            color: white;
            padding: 60px;
            border-radius: 12px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .hero-content h2 {
            font-size: 36px;
            margin-bottom: 15px;
        }

        .hero-content h2 .highlight {
            color: #90ee90;
        }

        .hero-content p {
            font-size: 16px;
            opacity: 0.9;
            line-height: 1.6;
        }

        .hero-image {
            width: 400px;
            height: 250px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        /* Two Column Layout */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        /* Quick Links */
        .quick-links {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .quick-links h3 {
            color: #1e5631;
            margin-bottom: 20px;
            font-size: 22px;
        }

        .link-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .link-item:hover {
            background: #f0f0f0;
        }

        .link-icon {
            width: 40px;
            height: 40px;
            background: #1e5631;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Retail Tools */
        .retail-tools {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .retail-tools h3 {
            color: #1e5631;
            margin-bottom: 20px;
            font-size: 22px;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .tool-card {
            background: #1e5631;
            color: white;
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
        }

        .tool-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.2);
        }

        .tool-icon {
            font-size: 32px;
            margin-bottom: 10px;
            opacity: 0.95;
            transition: transform 0.3s ease;
        }

        .tool-card:hover .tool-icon {
            transform: scale(1.1);
        }

        .tool-card h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .tool-card p {
            font-size: 12px;
            opacity: 0.9;
        }

        /* News and Events */
        .news-events {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .section-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .section-card h3 {
            color: #1e5631;
            margin-bottom: 20px;
            font-size: 22px;
        }

        .news-item {
            display: flex;
            gap: 15px;
            padding: 12px;
            margin-bottom: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .news-item:hover {
            background: #f9f9f9;
        }

        .news-image {
            width: 80px;
            height: 60px;
            background: #ddd;
            border-radius: 6px;
            flex-shrink: 0;
        }

        .news-content h4 {
            font-size: 14px;
            margin-bottom: 5px;
            color: #1e5631;
        }

        .news-content p {
            font-size: 12px;
            color: #666;
        }

        /* Floating Action Button */
        .fab-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .fab {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #1e5631, #2d7a47);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow:
                0 8px 24px rgba(30, 86, 49, 0.4),
                0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.2s ease;
            border: none;
        }

        .fab:hover {
            transform: scale(1.08);
            box-shadow:
                0 12px 32px rgba(30, 86, 49, 0.5),
                0 6px 16px rgba(0, 0, 0, 0.2);
        }

        .fab-icon {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: 10px;
        }

        .sanderson-logo {
            width: 34px;
            height: 34px;
        }

        .sanderson-logo-small {
            width: 34px;
            height: 34px;
        }

        .fab.active {
            transform: rotate(45deg);
        }

        /* Agent Modal */
        .agent-modal {
            position: fixed;
            bottom: 120px;
            right: 30px;
            width: 640px;
            max-height: 75vh;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 32px;
            box-shadow:
                0 32px 64px rgba(30, 86, 49, 0.25),
                0 16px 32px rgba(0, 0, 0, 0.15),
                0 0 0 1px rgba(30, 86, 49, 0.1);
            opacity: 0;
            transform: translateY(30px) scale(0.95);
            pointer-events: none;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            overflow: hidden;
            z-index: 999;
            display: flex;
            flex-direction: column;
        }

        .agent-modal.active {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: all;
        }

        /* Modal Header */
        .modal-header {
            background: linear-gradient(135deg, #1e5631 0%, #2d7a47 100%);
            color: white;
            padding: 20px 24px;
            display: flex;
            align-items: center;
            gap: 14px;
            position: relative;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            border-radius: 32px 32px 0 0;
            flex-shrink: 0;
        }

        .modal-header-icon {
            width: 44px;
            height: 44px;
            background: white;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            flex-shrink: 0;
        }

        .modal-header-content h3 {
            font-size: 18px;
            margin-bottom: 2px;
            font-weight: 600;
            letter-spacing: -0.2px;
        }

        .modal-header-content p {
            font-size: 12px;
            opacity: 0.85;
            font-weight: 400;
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            gap: 6px;
            padding: 12px 16px 8px 16px;
            background: white;
            border-bottom: 2px solid #edebe9;
            flex-shrink: 0;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .tab-nav::-webkit-scrollbar {
            display: none;
        }

        .tab-button {
            flex-shrink: 0;
            padding: 10px 16px;
            background: #f3f2f1;
            border-radius: 20px;
            border: none;
            font-size: 13px;
            font-weight: 600;
            color: #605e5c;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .tab-button:hover {
            background: #e1dfdd;
            transform: translateY(-1px);
        }

        .tab-button.active {
            background: linear-gradient(135deg, #1e5631, #2d7a47);
            color: white;
            box-shadow: 0 3px 10px rgba(30, 86, 49, 0.25);
        }

        .tab-count {
            display: inline-block;
            margin-left: 6px;
            padding: 2px 7px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            font-size: 11px;
            font-weight: 700;
        }

        .tab-button.active .tab-count {
            background: rgba(255, 255, 255, 0.25);
        }

        /* Modal Content Wrapper */
        .modal-content-wrapper {
            display: flex;
            flex-direction: column;
            flex: 1;
            overflow: hidden;
            min-height: 0;
        }

        /* Modal Content */
        .modal-content {
            flex: 1;
            overflow-y: auto;
            padding: 0;
            background: #fafafa;
            min-height: 0;
            position: relative;
        }

        .tab-content {
            display: none;
            padding: 24px 20px 16px 20px;
            animation: fadeIn 0.3s ease;
            width: 100%;
            background: #fafafa;
            min-height: 500px;
            position: relative;
            z-index: 1;
        }

        .tab-content.active {
            display: block;
        }

        /* Chat tab has no padding since it has empty state */
        #chatTab {
            padding: 0;
            background: #fafafa;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Chat Tab Empty State */
        .chat-empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 20px;
            text-align: center;
        }

        .chat-empty-state.hidden {
            display: none;
        }

        .chat-empty-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #1e5631, #2d7a47);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            box-shadow: 0 8px 24px rgba(30, 86, 49, 0.25);
        }

        .chat-empty-icon svg {
            width: 44px;
            height: 44px;
        }

        .chat-empty-state h4 {
            font-size: 18px;
            color: #201f1e;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .chat-empty-state p {
            font-size: 13px;
            color: #605e5c;
            line-height: 1.5;
        }

        #chatMessages {
            max-height: calc(75vh - 280px);
            overflow-y: auto;
            padding: 16px;
        }

        .feature-section {
            margin-bottom: 24px;
        }

        .section-title {
            font-size: 11px;
            font-weight: 600;
            color: #605e5c;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }

        /* Info Cards */
        .info-card {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid #edebe9;
            box-shadow: 0 2px 6px rgba(0,0,0,0.06);
            position: relative;
        }

        .info-card:hover {
            border-color: #1e5631;
            box-shadow: 0 8px 20px rgba(30, 86, 49, 0.15);
            transform: translateY(-2px);
        }

        .info-card:active {
            transform: translateY(0);
            transition: all 0.1s ease;
        }

        .info-card.expanded {
            background: white;
            border-color: #1e5631;
            box-shadow: 0 12px 32px rgba(30, 86, 49, 0.2);
        }

        .info-card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .video-thumbnail {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }

        .info-card:hover .video-thumbnail {
            transform: scale(1.05);
        }

        .info-card-content h4 {
            font-size: 14px;
            margin-bottom: 3px;
            color: #201f1e;
            font-weight: 600;
            line-height: 1.3;
        }

        .info-card-content p {
            font-size: 12px;
            color: #605e5c;
            line-height: 1.4;
        }

        .info-card-meta {
            display: flex;
            gap: 10px;
            font-size: 11px;
            color: #8a8886;
            margin-top: 8px;
            flex-wrap: wrap;
            font-weight: 400;
        }

        .info-card-meta span {
            padding: 3px 8px;
            background: #f3f2f1;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .info-card:hover .info-card-meta span {
            background: #e1dfdd;
        }

        .info-card-expanded-content {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .info-card.expanded .info-card-expanded-content {
            max-height: 600px;
            opacity: 1;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 2px solid #f0f0f0;
        }

        /* Quick Task Cards */
        .task-card {
            background: linear-gradient(135deg, #1e5631, #2d7a47);
            color: white;
            border-radius: 16px;
            padding: 18px;
            margin-bottom: 10px;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 4px 12px rgba(30, 86, 49, 0.25);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(30, 86, 49, 0.35);
        }

        .task-card:active {
            transform: translateY(0);
        }

        .task-card.completed {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .task-card h4 {
            font-size: 15px;
            margin-bottom: 8px;
            font-weight: 600;
            line-height: 1.3;
        }

        .task-card p {
            font-size: 13px;
            opacity: 0.95;
            margin-bottom: 14px;
            line-height: 1.5;
        }

        .task-actions {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: white;
            color: #1e5631;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .btn-primary:hover {
            background: #f3f2f1;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .btn-primary:active {
            transform: translateY(0);
            transition: all 0.1s ease;
        }

        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
        }

        .btn-secondary:active {
            transform: scale(0.98);
            transition: all 0.1s ease;
        }

        /* Chat Messages Container */
        .chat-messages-container {
            display: none;
            height: 300px;
            background: #fafafa;
            border-top: 1px solid #edebe9;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .chat-messages-container.active {
            display: block;
            animation: fadeInSlide 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes fadeInSlide {
            from {
                opacity: 0;
                max-height: 0;
            }
            to {
                opacity: 1;
                max-height: 300px;
            }
        }

        /* Chat Bar */
        .chat-bar {
            padding: 16px 20px;
            background: white;
            border-top: 1px solid #edebe9;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-shrink: 0;
        }

        .chat-messages {
            padding: 16px;
            min-height: 50px;
            display: flex;
            flex-direction: column;
        }

        .message {
            margin-bottom: 14px;
            animation: slideInMessage 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes slideInMessage {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.9);
            }
            60% {
                transform: translateY(-3px) scale(1.01);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .message.user {
            display: flex;
            justify-content: flex-end;
        }

        .message.agent {
            display: flex;
            justify-content: flex-start;
        }

        .message-bubble {
            max-width: 80%;
            padding: 13px 17px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.6;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .message-bubble:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
            transform: translateY(-1px);
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, #1e5631, #2d7a47);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.agent .message-bubble {
            background: white;
            color: #201f1e;
            border-bottom-left-radius: 4px;
            border: 1px solid #edebe9;
        }

        .message-link {
            color: #1e5631;
            text-decoration: none;
            display: block;
            margin-top: 8px;
            font-size: 13px;
        }

        .message-link:hover {
            text-decoration: underline;
        }

        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 14px 18px;
            background: white;
            border-radius: 18px;
            width: fit-content;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 1px solid rgba(30, 86, 49, 0.1);
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #605e5c;
            border-radius: 50%;
            animation: typing 1.4s infinite;
            opacity: 0.6;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        .chat-input {
            flex: 1;
            padding: 10px 14px;
            border: 1px solid #8a8886;
            border-radius: 4px;
            font-size: 14px;
            outline: none;
            transition: all 0.2s ease;
            background: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .chat-input:focus {
            border-color: #1e5631;
            box-shadow: 0 0 0 1px #1e5631;
        }

        .chat-input::placeholder {
            color: #a19f9d;
        }

        .send-button {
            width: 40px;
            height: 40px;
            background: #1e5631;
            border-radius: 4px;
            border: none;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 18px;
            flex-shrink: 0;
        }

        .send-button:hover {
            background: #2d7a47;
        }

        .send-button:active {
            transform: scale(0.95);
            transition: all 0.1s ease;
        }

        .send-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: scale(1);
            box-shadow: none;
        }

        .video-player {
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 12px;
            margin-bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }

        .video-player video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }

        /* Scrollbar Styling */
        .modal-content::-webkit-scrollbar,
        .chat-messages-container::-webkit-scrollbar {
            width: 6px;
        }

        .modal-content::-webkit-scrollbar-track,
        .chat-messages-container::-webkit-scrollbar-track {
            background: transparent;
        }

        .modal-content::-webkit-scrollbar-thumb,
        .chat-messages-container::-webkit-scrollbar-thumb {
            background: rgba(30, 86, 49, 0.3);
            border-radius: 10px;
            transition: background 0.3s;
        }

        .modal-content::-webkit-scrollbar-thumb:hover,
        .chat-messages-container::-webkit-scrollbar-thumb:hover {
            background: rgba(30, 86, 49, 0.6);
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .two-column {
                grid-template-columns: 1fr;
            }

            .tools-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .agent-modal {
                right: 20px;
                width: 460px;
            }
        }

        @media (max-width: 768px) {
            .hero {
                flex-direction: column;
                text-align: center;
                padding: 40px 30px;
            }

            .hero-image {
                width: 100%;
                margin-top: 20px;
            }

            .news-events {
                grid-template-columns: 1fr;
            }

            .tools-grid {
                grid-template-columns: 1fr;
            }

            .agent-modal {
                bottom: 90px;
                right: 10px;
                left: 10px;
                width: auto;
                max-height: 75vh;
                border-radius: 20px;
            }

            .modal-header {
                padding: 20px 18px 16px 18px;
            }

            .modal-header-icon {
                width: 44px;
                height: 44px;
                font-size: 20px;
            }

            .modal-header-content h3 {
                font-size: 17px;
            }

            .modal-header-content p {
                font-size: 12px;
            }

            .modal-content {
                max-height: calc(75vh - 160px);
                padding: 16px 16px 8px 16px;
            }

            .info-card,
            .task-card {
                padding: 16px;
                border-radius: 14px;
            }

            .section-title {
                font-size: 11px;
                margin-bottom: 12px;
            }

            .chat-messages-container {
                height: 250px;
            }

            .chat-bar {
                padding: 14px 16px;
                gap: 10px;
            }

            .chat-input {
                padding: 11px 16px;
                font-size: 13px;
            }

            .send-button {
                width: 42px;
                height: 42px;
                font-size: 16px;
            }

            .message-bubble {
                font-size: 13px;
                padding: 11px 15px;
            }

            .fab-container {
                bottom: 20px;
                right: 20px;
            }

            .fab {
                width: 60px;
                height: 60px;
            }

            .fab-icon {
                font-size: 28px;
            }

            .btn {
                padding: 10px 18px;
                font-size: 12px;
            }
        }

        @media (max-width: 480px) {
            .agent-modal {
                bottom: 80px;
                right: 8px;
                left: 8px;
                max-height: 70vh;
                border-radius: 18px;
            }

            .modal-header {
                padding: 18px 16px 14px 16px;
                gap: 12px;
            }

            .modal-content {
                max-height: calc(70vh - 150px);
                padding: 14px 14px 6px 14px;
            }

            .info-card-header {
                gap: 12px;
            }

            .video-thumbnail {
                width: 48px;
                height: 48px;
                font-size: 20px;
            }

            .info-card-content h4 {
                font-size: 14px;
            }

            .info-card-content p {
                font-size: 12px;
            }

            .task-card h4 {
                font-size: 15px;
            }

            .task-card p {
                font-size: 12px;
            }

            .chat-messages-container {
                height: 220px;
            }

            .fab {
                width: 56px;
                height: 56px;
            }

            .fab-icon {
                font-size: 26px;
            }
        }
    </style>
</head>
<body>
    <!-- Main Container -->
    <div class="container">

        <!-- Hero Section -->
        <div class="hero">
            <div class="hero-content">
                <h2>Welcome to<br><span class="highlight">Sanderson's World Foods</span></h2>
                <p>The digital hub for our supermarket locations. Stay connected with company news, retail tools, and regional updates‚Äîall in one place for our retail teams!</p>
            </div>
            <div class="hero-image">
                <img src="https://images.unsplash.com/photo-1604719312566-8912e9227c6a?w=400&h=250&fit=crop" alt="Supermarket Interior" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px;">
            </div>
        </div>

        <!-- Two Column Layout -->
        <div class="two-column">
            <!-- Quick Links -->
            <div class="quick-links">
                <h3>Quick Links</h3>
                <div class="link-item">
                    <div class="link-icon">üìÖ</div>
                    <span>Scheduling Portal (ATS, PTO, swaps)</span>
                </div>
                <div class="link-item">
                    <div class="link-icon">üí∞</div>
                    <span>Payroll & Benefits Access</span>
                </div>
                <div class="link-item">
                    <div class="link-icon">‚ùì</div>
                    <span>IT Helpdesk</span>
                </div>
                <div class="link-item">
                    <div class="link-icon">üìñ</div>
                    <span>Store Operations Manual</span>
                </div>
                <div class="link-item">
                    <div class="link-icon">üìç</div>
                    <span>Our Locations</span>
                </div>
            </div>

            <!-- Retail Tools & Resources -->
            <div class="retail-tools">
                <h3>Retail Tools & Resources</h3>
                <div class="tools-grid">
                    <div class="tool-card">
                        <div class="tool-icon">üì∞</div>
                        <h4>Weekly Ads &<br>Flyer Preview</h4>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üìã</div>
                        <h4>Merchandising<br>Manual</h4>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">‚ö†Ô∏è</div>
                        <h4>Product Recall<br>Notifications</h4>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üì¶</div>
                        <h4>Inventory<br>Count & Track</h4>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üìä</div>
                        <h4>Daily POS<br>Sales Dashboard</h4>
                    </div>
                    <div class="tool-card">
                        <div class="tool-icon">üéâ</div>
                        <h4>Store Promotion<br>& Event Toolkit</h4>
                    </div>
                </div>
            </div>
        </div>

        <!-- News and Events -->
        <div class="news-events">
            <div class="section-card">
                <h3>Company News</h3>
                <div class="news-item">
                    <div class="news-image" style="background: #ddeedd;">
                        <img src="https://images.unsplash.com/photo-1578916171728-46686eac8d58?w=80&h=60&fit=crop" alt="Store Opening" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                    </div>
                    <div class="news-content">
                        <h4>Sanderson's Expands: Grand Opening of 4th Store in Valley Heights</h4>
                        <p>Dec 15, 2025 ‚Ä¢ Corporate HQ</p>
                    </div>
                </div>
                <div class="news-item">
                    <div class="news-image" style="background: #eeddee;">
                        <img src="https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=80&h=60&fit=crop" alt="Digital Technology" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                    </div>
                    <div class="news-content">
                        <h4>Digital Reach Partners Brings CLICK & COLLECT to Stores 1 & 3</h4>
                        <p>Dec 8, 2025 ‚Ä¢ Tech & Innovation</p>
                    </div>
                </div>
                <div class="news-item">
                    <div class="news-image" style="background: #ddeeff;">
                        <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?w=80&h=60&fit=crop" alt="Team Award" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                    </div>
                    <div class="news-content">
                        <h4>Employee Spotlight: Sandra Awarded Best Fresh Produce Team</h4>
                        <p>Nov 30, 2025 ‚Ä¢ HR Department</p>
                    </div>
                </div>
            </div>

            <div class="section-card">
                <h3>Events</h3>
                <div class="news-item">
                    <div class="news-image" style="background: #ffeecc;">
                        <img src="https://images.unsplash.com/photo-1506784983877-45594efa4cbe?w=80&h=60&fit=crop" alt="Calendar Schedule" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                    </div>
                    <div class="news-content">
                        <h4>Annual Holiday Shifts Schedule Released</h4>
                        <p>Dec 20, 2025 ‚Ä¢ All Stores</p>
                    </div>
                </div>
                <div class="news-item">
                    <div class="news-image" style="background: #ffdddd;">
                        <img src="https://images.unsplash.com/photo-1488459716781-31db52582fe9?w=80&h=60&fit=crop" alt="Food Donation" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                    </div>
                    <div class="news-content">
                        <h4>New Year's Food Drive: Accepting Donations Now</h4>
                        <p>Jan 5, 2026</p>
                    </div>
                </div>
                <div class="news-item">
                    <div class="news-image" style="background: #ddffdd;">
                        <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=80&h=60&fit=crop" alt="BBQ Event" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                    </div>
                    <div class="news-content">
                        <h4>Employee Appreciation Barbecue</h4>
                        <p>Jan 15, 2026</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <div class="fab-container">
        <div class="fab" id="fabButton">
            <div class="fab-icon">
                <svg class="sanderson-logo-small" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <!-- Outer circle -->
                    <circle cx="50" cy="50" r="48" fill="none" stroke="#1e5631" stroke-width="3"/>
                    <!-- Crown/Star -->
                    <polygon points="50,15 52,22 59,22 53,27 55,34 50,29 45,34 47,27 41,22 48,22" fill="#1e5631"/>
                    <!-- Crown points left -->
                    <polygon points="28,25 30,30 35,28 32,33" fill="#1e5631"/>
                    <polygon points="20,35 22,40 27,38 24,43" fill="#1e5631"/>
                    <!-- Crown points right -->
                    <polygon points="72,25 70,30 65,28 68,33" fill="#1e5631"/>
                    <polygon points="80,35 78,40 73,38 76,43" fill="#1e5631"/>
                    <!-- Face -->
                    <ellipse cx="50" cy="50" rx="15" ry="18" fill="#1e5631"/>
                    <!-- Eyes -->
                    <ellipse cx="45" cy="48" rx="2" ry="3" fill="#fff"/>
                    <ellipse cx="55" cy="48" rx="2" ry="3" fill="#fff"/>
                    <!-- Smile -->
                    <path d="M 45 54 Q 50 56 55 54" stroke="#fff" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                    <!-- Hair left -->
                    <path d="M 35 45 Q 32 50 30 58 Q 28 65 30 72" stroke="#1e5631" stroke-width="3" fill="none"/>
                    <path d="M 37 48 Q 35 53 34 60 Q 33 67 35 74" stroke="#1e5631" stroke-width="2.5" fill="none"/>
                    <path d="M 40 50 Q 39 55 38 62 Q 37 69 39 76" stroke="#1e5631" stroke-width="2" fill="none"/>
                    <!-- Hair right -->
                    <path d="M 65 45 Q 68 50 70 58 Q 72 65 70 72" stroke="#1e5631" stroke-width="3" fill="none"/>
                    <path d="M 63 48 Q 65 53 66 60 Q 67 67 65 74" stroke="#1e5631" stroke-width="2.5" fill="none"/>
                    <path d="M 60 50 Q 61 55 62 62 Q 63 69 61 76" stroke="#1e5631" stroke-width="2" fill="none"/>
                    <!-- Body waves left -->
                    <path d="M 30 72 Q 25 78 22 85" stroke="#1e5631" stroke-width="3" fill="none"/>
                    <path d="M 35 74 Q 30 80 27 85" stroke="#1e5631" stroke-width="2.5" fill="none"/>
                    <!-- Body waves right -->
                    <path d="M 70 72 Q 75 78 78 85" stroke="#1e5631" stroke-width="3" fill="none"/>
                    <path d="M 65 74 Q 70 80 73 85" stroke="#1e5631" stroke-width="2.5" fill="none"/>
                </svg>
            </div>
        </div>
    </div>

    <!-- Agent Modal -->
    <div class="agent-modal" id="agentModal">
        <!-- Modal Header -->
        <div class="modal-header">
            <div class="modal-header-icon">
                <svg class="sanderson-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <!-- Outer circle -->
                    <circle cx="50" cy="50" r="48" fill="none" stroke="#1e5631" stroke-width="3"/>
                    <!-- Crown/Star -->
                    <polygon points="50,15 52,22 59,22 53,27 55,34 50,29 45,34 47,27 41,22 48,22" fill="#1e5631"/>
                    <!-- Crown points left -->
                    <polygon points="28,25 30,30 35,28 32,33" fill="#1e5631"/>
                    <polygon points="20,35 22,40 27,38 24,43" fill="#1e5631"/>
                    <!-- Crown points right -->
                    <polygon points="72,25 70,30 65,28 68,33" fill="#1e5631"/>
                    <polygon points="80,35 78,40 73,38 76,43" fill="#1e5631"/>
                    <!-- Face -->
                    <ellipse cx="50" cy="50" rx="15" ry="18" fill="#1e5631"/>
                    <!-- Eyes -->
                    <ellipse cx="45" cy="48" rx="2" ry="3" fill="#fff"/>
                    <ellipse cx="55" cy="48" rx="2" ry="3" fill="#fff"/>
                    <!-- Smile -->
                    <path d="M 45 54 Q 50 56 55 54" stroke="#fff" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                    <!-- Hair left -->
                    <path d="M 35 45 Q 32 50 30 58 Q 28 65 30 72" stroke="#1e5631" stroke-width="3" fill="none"/>
                    <path d="M 37 48 Q 35 53 34 60 Q 33 67 35 74" stroke="#1e5631" stroke-width="2.5" fill="none"/>
                    <path d="M 40 50 Q 39 55 38 62 Q 37 69 39 76" stroke="#1e5631" stroke-width="2" fill="none"/>
                    <!-- Hair right -->
                    <path d="M 65 45 Q 68 50 70 58 Q 72 65 70 72" stroke="#1e5631" stroke-width="3" fill="none"/>
                    <path d="M 63 48 Q 65 53 66 60 Q 67 67 65 74" stroke="#1e5631" stroke-width="2.5" fill="none"/>
                    <path d="M 60 50 Q 61 55 62 62 Q 63 69 61 76" stroke="#1e5631" stroke-width="2" fill="none"/>
                    <!-- Body waves left -->
                    <path d="M 30 72 Q 25 78 22 85" stroke="#1e5631" stroke-width="3" fill="none"/>
                    <path d="M 35 74 Q 30 80 27 85" stroke="#1e5631" stroke-width="2.5" fill="none"/>
                    <!-- Body waves right -->
                    <path d="M 70 72 Q 75 78 78 85" stroke="#1e5631" stroke-width="3" fill="none"/>
                    <path d="M 65 74 Q 70 80 73 85" stroke="#1e5631" stroke-width="2.5" fill="none"/>
                </svg>
            </div>
            <div class="modal-header-content">
                <h3>Sanderson's Assistant</h3>
                <p>Your AI-powered workplace companion</p>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-nav">
            <button class="tab-button active" onclick="switchTab('chat', event)">üí¨ Chat</button>
            <button class="tab-button" onclick="switchTab('updates', event)">üì∫ Updates <span class="tab-count">2</span></button>
            <button class="tab-button" onclick="switchTab('tasks', event)">‚ö° Tasks <span class="tab-count">2</span></button>
            <button class="tab-button" onclick="switchTab('connect', event)">ü§ù Connect <span class="tab-count">2</span></button>
        </div>

        <!-- Modal Content Wrapper -->
        <div class="modal-content-wrapper">
            <div class="modal-content">
                <!-- Chat Tab -->
                <div id="chatTab" class="tab-content active">
                    <!-- Empty State -->
                    <div class="chat-empty-state" id="chatEmptyState">
                        <div class="chat-empty-icon">
                            <svg class="sanderson-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="50" r="48" fill="none" stroke="#fff" stroke-width="3"/>
                                <polygon points="50,15 52,22 59,22 53,27 55,34 50,29 45,34 47,27 41,22 48,22" fill="#fff"/>
                                <polygon points="28,25 30,30 35,28 32,33" fill="#fff"/>
                                <polygon points="20,35 22,40 27,38 24,43" fill="#fff"/>
                                <polygon points="72,25 70,30 65,28 68,33" fill="#fff"/>
                                <polygon points="80,35 78,40 73,38 76,43" fill="#fff"/>
                                <ellipse cx="50" cy="50" rx="15" ry="18" fill="#fff"/>
                                <ellipse cx="45" cy="48" rx="2" ry="3" fill="#1e5631"/>
                                <ellipse cx="55" cy="48" rx="2" ry="3" fill="#1e5631"/>
                                <path d="M 45 54 Q 50 56 55 54" stroke="#1e5631" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                                <path d="M 35 45 Q 32 50 30 58 Q 28 65 30 72" stroke="#fff" stroke-width="3" fill="none"/>
                                <path d="M 37 48 Q 35 53 34 60 Q 33 67 35 74" stroke="#fff" stroke-width="2.5" fill="none"/>
                                <path d="M 40 50 Q 39 55 38 62 Q 37 69 39 76" stroke="#fff" stroke-width="2" fill="none"/>
                                <path d="M 65 45 Q 68 50 70 58 Q 72 65 70 72" stroke="#fff" stroke-width="3" fill="none"/>
                                <path d="M 63 48 Q 65 53 66 60 Q 67 67 65 74" stroke="#fff" stroke-width="2.5" fill="none"/>
                                <path d="M 60 50 Q 61 55 62 62 Q 63 69 61 76" stroke="#fff" stroke-width="2" fill="none"/>
                                <path d="M 30 72 Q 25 78 22 85" stroke="#fff" stroke-width="3" fill="none"/>
                                <path d="M 35 74 Q 30 80 27 85" stroke="#fff" stroke-width="2.5" fill="none"/>
                                <path d="M 70 72 Q 75 78 78 85" stroke="#fff" stroke-width="3" fill="none"/>
                                <path d="M 65 74 Q 70 80 73 85" stroke="#fff" stroke-width="2.5" fill="none"/>
                            </svg>
                        </div>
                        <h4>Ask me anything</h4>
                        <p>I can help with policies, benefits, schedules,<br>and everything Sanderson's!</p>
                    </div>

                    <!-- Chat Messages -->
                    <div class="chat-messages" id="chatMessages" style="padding: 16px; display: none;">
                        <!-- Messages will be added here dynamically -->
                    </div>
                </div>

                <!-- Updates Tab -->
                <div id="updatesTab" class="tab-content">
                    <div class="feature-section">
                        <div class="section-title">
                            <span>üì∫</span> Information & Updates
                        </div>

                <!-- Weekly Recap Card -->
                <div class="info-card" id="weeklyRecapCard">
                    <div class="info-card-header" onclick="toggleWeeklyRecap()">
                        <div class="video-thumbnail">‚ñ∂Ô∏è</div>
                        <div class="info-card-content">
                            <h4>Weekly Recap</h4>
                            <p>A quick 30-second video covering this week's top updates and wins</p>
                        </div>
                    </div>
                    <div class="info-card-meta">
                        <span>üïê 30 seconds</span>
                        <span>üìÖ This week</span>
                        <span>üî• 5 updates</span>
                    </div>

                    <!-- Expanded Video Content -->
                    <div class="info-card-expanded-content" id="weeklyRecapExpanded">
                        <div class="video-player">
                            <video id="weeklyVideo" controls style="width: 100%; border-radius: 12px;">
                                <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                        <div class="video-info" style="margin-top: 14px;">
                            <h3 style="font-size: 16px; color: #1e5631; margin-bottom: 10px;">This Week's Highlights</h3>
                            <ul style="padding-left: 20px; line-height: 1.8; font-size: 13px; color: #666;">
                                <li>üéâ Grand opening of our 4th location in Valley Heights</li>
                                <li>üì± Click & Collect now available at 2 stores</li>
                                <li>üèÜ Q4 sales exceeded targets by 12%</li>
                                <li>üéÑ Holiday schedule and bonus announcements</li>
                                <li>üë• New leadership appointments in Operations</li>
                            </ul>
                        </div>
                        <button class="btn btn-primary" style="background: #1e5631; color: white; width: 100%; margin-top: 14px;" onclick="event.stopPropagation(); startRecapChat();">
                            üí¨ Ask about these updates
                        </button>
                    </div>
                </div>

                <!-- Leadership Card -->
                <div class="info-card" id="leadershipCard">
                    <div class="info-card-header" onclick="toggleLeadership()">
                        <div class="video-thumbnail" style="background: linear-gradient(135deg, #f093fb, #f5576c);">üí≠</div>
                        <div class="info-card-content">
                            <h4>Top of Mind from Leadership</h4>
                            <p>Your manager's current priorities and what matters most this week</p>
                        </div>
                    </div>
                    <div class="info-card-meta">
                        <span>üë§ From: Sarah Chen (Manager)</span>
                        <span>üéØ 3 priorities</span>
                    </div>

                    <!-- Expanded Leadership Content -->
                    <div class="info-card-expanded-content" id="leadershipExpanded">
                        <div style="background: linear-gradient(135deg, #f8f9fa, #ffffff); padding: 16px; border-radius: 12px; margin-bottom: 12px;">
                            <h4 style="font-size: 14px; color: #1e5631; margin-bottom: 12px; font-weight: 600;">üìå From Sarah Chen (Your Manager):</h4>
                            <div style="font-size: 13px; color: #666; line-height: 1.8;">
                                <p style="margin-bottom: 8px;"><strong>1.</strong> Focus on customer experience during holiday rush</p>
                                <p style="margin-bottom: 8px;"><strong>2.</strong> Complete Q1 training modules by Jan 15</p>
                                <p style="margin-bottom: 0;"><strong>3.</strong> Team building event planning for February</p>
                            </div>
                        </div>
                        <div style="background: linear-gradient(135deg, #e3f2fd, #ffffff); padding: 14px; border-radius: 12px; font-size: 13px; color: #666; margin-bottom: 12px;">
                            üí° <strong>Tip:</strong> You have a 1:1 sync with Sarah in 2 days. Would you like help preparing talking points?
                        </div>
                        <button class="btn btn-primary" style="background: #1e5631; color: white; width: 100%;" onclick="event.stopPropagation(); startLeadershipChat();">
                            üí¨ Discuss with Assistant
                        </button>
                    </div>
                </div>
                    </div>
                </div>

                <!-- Tasks Tab -->
                <div id="tasksTab" class="tab-content">
                    <div class="feature-section">
                        <div class="section-title">
                            <span>‚ö°</span> Quick Tasks
                        </div>

                <div class="task-card" id="lunchCard">
                    <h4>üçΩÔ∏è Order Lunch Today</h4>
                    <p><strong>Today's Special:</strong> Mediterranean Chicken Bowl with Quinoa & Fresh Veggies<br>
                    ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.8/5) ‚Ä¢ Your go-to favorite! Available at Cafeteria B until 2:00 PM</p>
                    <div class="task-actions">
                        <button class="btn btn-primary" onclick="event.stopPropagation(); reviewLunch();">Review Order</button>
                        <button class="btn btn-secondary" onclick="event.stopPropagation(); alert('Opening cafeteria menu...');">View Menu</button>
                    </div>
                </div>

                <div class="task-card" id="claimCard" style="background: linear-gradient(135deg, #4a9d5f, #1e5631, #3a9155);">
                    <h4>üí∞ Submit Reimbursement Claim</h4>
                    <p>I noticed a new receipt in your OneDrive: <strong>"Office Supplies - Staples"</strong> ($47.82) from Dec 18, 2025<br>
                    Ready to submit this for reimbursement?</p>
                    <div class="task-actions">
                        <button class="btn btn-primary" onclick="event.stopPropagation(); reviewClaim();">Review & Submit</button>
                        <button class="btn btn-secondary" onclick="event.stopPropagation(); dismissClaim();">Dismiss</button>
                    </div>
                </div>
                    </div>
                </div>

                <!-- Connect Tab -->
                <div id="connectTab" class="tab-content">
                    <div class="feature-section">
                        <div class="section-title">
                            <span>üë•</span> Connect with Collaborators
                        </div>

                        <!-- Teammate 1 -->
                        <div class="task-card" id="teammate1Card" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                            <h4>üí¨ Marcus Rodriguez</h4>
                            <p><strong>Store Operations Lead</strong><br>
                            Last contact: 18 days ago via Teams<br>
                            üìç Valley Heights Location ‚Ä¢ Shared projects: Inventory System Rollout</p>
                            <div class="task-actions">
                                <button class="btn btn-primary" onclick="event.stopPropagation(); reviewTeammateMessage('teammate1');">Send Catch-Up Message</button>
                            </div>
                        </div>
                    </div>

                    <div class="feature-section">
                        <div class="section-title">
                            <span>üéâ</span> Connect with Company
                        </div>

                        <!-- Event 1 -->
                        <div class="task-card" id="event1Card" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                            <h4>üéÇ Employee Appreciation Barbecue</h4>
                            <p><strong>January 15, 2026 ‚Ä¢ 12:00 PM - 3:00 PM</strong><br>
                            üìç Downtown Flagship - Outdoor Patio Area<br>
                            Join us for food, games, and recognition of outstanding team members!</p>
                            <div class="task-actions">
                                <button class="btn btn-primary" onclick="event.stopPropagation(); reviewEventRSVP('event1');">RSVP Now</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Bar -->
        <div class="chat-bar">
            <input type="text" class="chat-input" id="chatInput" placeholder="Ask me anything..." onkeypress="handleChatEnter(event)">
            <button class="send-button" id="sendButton" onclick="sendMessage()">
                ‚û§
            </button>
        </div>
    </div>

    <script>
        // State Management
        let chatContext = 'general';

        // FAB Toggle
        const fabButton = document.getElementById('fabButton');
        const agentModal = document.getElementById('agentModal');

        fabButton.addEventListener('click', () => {
            const isActive = agentModal.classList.contains('active');

            if (isActive) {
                closeModal();
            } else {
                openModal();
            }
        });

        function openModal() {
            agentModal.classList.add('active');
            fabButton.classList.add('active');

            // Focus chat input for immediate typing
            setTimeout(() => {
                document.getElementById('chatInput').focus();
            }, 500);
        }

        function closeModal() {
            agentModal.classList.remove('active');
            fabButton.classList.remove('active');

            // Collapse all expanded sections after modal closes
            setTimeout(() => {
                collapseAll();
            }, 400);
        }

        function collapseAll() {
            document.getElementById('weeklyRecapCard').classList.remove('expanded');
            document.getElementById('leadershipCard').classList.remove('expanded');
            const video = document.getElementById('weeklyVideo');
            if (video) video.pause();
        }

        // Tab Switching
        function switchTab(tabName, event) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // Remove active from all buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            const targetTab = document.getElementById(tabName + 'Tab');
            if (targetTab) {
                targetTab.classList.add('active');
            }

            // Activate button if event is provided
            if (event && event.target) {
                event.target.classList.add('active');
            } else {
                // Fallback: find button by tab name
                const buttons = document.querySelectorAll('.tab-button');
                const tabIndex = ['chat', 'updates', 'tasks', 'connect'].indexOf(tabName);
                if (tabIndex >= 0 && buttons[tabIndex]) {
                    buttons[tabIndex].classList.add('active');
                }
            }

            // If switching to chat, focus input
            if (tabName === 'chat') {
                setTimeout(() => {
                    document.getElementById('chatInput').focus();
                }, 100);
            }
        }

        // Toggle Weekly Recap
        function toggleWeeklyRecap() {
            const card = document.getElementById('weeklyRecapCard');
            const isExpanded = card.classList.contains('expanded');

            // Collapse others
            document.getElementById('leadershipCard').classList.remove('expanded');

            if (isExpanded) {
                card.classList.remove('expanded');
                const video = document.getElementById('weeklyVideo');
                video.pause();
            } else {
                card.classList.add('expanded');
                setTimeout(() => {
                    const video = document.getElementById('weeklyVideo');
                    video.play();
                    // Smooth scroll to show expanded content
                    card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }, 300);
            }
        }

        // Toggle Leadership
        function toggleLeadership() {
            const card = document.getElementById('leadershipCard');
            const isExpanded = card.classList.contains('expanded');

            // Collapse others
            document.getElementById('weeklyRecapCard').classList.remove('expanded');
            const video = document.getElementById('weeklyVideo');
            video.pause();

            if (isExpanded) {
                card.classList.remove('expanded');
            } else {
                card.classList.add('expanded');
                setTimeout(() => {
                    card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }, 300);
            }
        }

        // Helper function to ensure chat is visible and in focus
        function ensureChatVisible() {
            // Switch to chat tab
            const chatTab = document.getElementById('chatTab');
            const chatButton = document.querySelectorAll('.tab-button')[0];

            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // Remove active from all buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show chat tab
            chatTab.classList.add('active');
            chatButton.classList.add('active');

            // Focus input
            setTimeout(() => {
                document.getElementById('chatInput')?.focus();
            }, 100);
        }

        // Start chats from expanded cards
        function startRecapChat() {
            chatContext = 'recap';
            document.getElementById('weeklyRecapCard').classList.remove('expanded');

            ensureChatVisible();

            setTimeout(() => {
                addAgentMessage("I'm here to help! What would you like to know more about from this week's updates? I can dive deeper into any of the highlights.");
            }, 400);
        }

        function startLeadershipChat() {
            chatContext = 'leadership';
            document.getElementById('leadershipCard').classList.remove('expanded');

            ensureChatVisible();

            setTimeout(() => {
                addAgentMessage("Let's get you ready for your 1:1 with Sarah! I can help you prepare talking points, review her priorities, or discuss any challenges you're facing. What would be most helpful?");
            }, 400);
        }

        // Chat Functions
        function handleChatEnter(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();

            if (!message) return;

            const chatMessages = document.getElementById('chatMessages');
            const emptyState = document.getElementById('chatEmptyState');

            // Hide empty state and show messages
            if (emptyState) {
                emptyState.classList.add('hidden');
            }
            chatMessages.style.display = 'block';

            // Add user message
            const userMsgDiv = document.createElement('div');
            userMsgDiv.className = 'message user';
            userMsgDiv.innerHTML = `<div class="message-bubble">${message}</div>`;
            chatMessages.appendChild(userMsgDiv);

            // Clear input
            input.value = '';

            // Show typing indicator
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message agent';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="typing-indicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            chatMessages.appendChild(typingDiv);

            // Scroll to bottom
            setTimeout(() => {
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 100);

            // Simulate AI response
            setTimeout(() => {
                // Remove typing indicator
                const indicator = document.getElementById('typingIndicator');
                if (indicator) indicator.remove();

                // Add agent response
                respondToMessage(message);
            }, 1500);
        }

        function addAgentMessage(text) {
            const chatMessages = document.getElementById('chatMessages');
            const emptyState = document.getElementById('chatEmptyState');

            if (!chatMessages) return;

            // Hide empty state and show messages
            if (emptyState) {
                emptyState.classList.add('hidden');
            }
            chatMessages.style.display = 'block';

            const messageDiv = document.createElement('div');
            messageDiv.className = 'message agent';
            messageDiv.innerHTML = `<div class="message-bubble">${text}</div>`;
            chatMessages.appendChild(messageDiv);

            // Scroll to bottom
            setTimeout(() => {
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 50);
        }

        // ===== KNOWLEDGE BASE (RAG Data Source) =====
        // This simulates a vector database - in production, this would be in a real DB
        const knowledgeBase = {
            policies: {
                pto: {
                    keywords: ['pto', 'time off', 'vacation', 'leave', 'days off', 'holiday'],
                    content: {
                        title: "Time Off Policy",
                        balance: "15 PTO days remaining for 2026",
                        process: [
                            "Open the Scheduling Portal",
                            "Click 'Request Time Off'",
                            "Select your dates",
                            "Submit for Sarah's approval"
                        ],
                        tips: "Submit requests at least 2 weeks in advance for better approval chances!",
                        links: ["‚Üí Open Scheduling Portal"]
                    }
                },
                benefits: {
                    keywords: ['benefit', 'insurance', 'health', 'medical', 'dental', '401k', 'retirement'],
                    content: {
                        title: "Benefits Package",
                        categories: {
                            "Health & Wellness": [
                                "Medical, Dental, Vision Insurance",
                                "Wellness Programs & Gym Discounts"
                            ],
                            "Financial": [
                                "401(k) with 4% company match",
                                "Life & Disability Insurance",
                                "Employee Discount: 20% on all products"
                            ],
                            "Time Off": [
                                "Paid Time Off (PTO)",
                                "Sick Leave",
                                "Paid Holidays"
                            ]
                        },
                        note: "Open enrollment is in November each year.",
                        links: ["‚Üí View Full Benefits Details"]
                    }
                },
                dress_code: {
                    keywords: ['dress code', 'uniform', 'what to wear', 'clothing', 'attire'],
                    content: {
                        title: "Dress Code Policy",
                        guidelines: [
                            "Floor staff: Green Sanderson's polo + khaki pants/skirt",
                            "Management: Business casual (collared shirt, slacks)",
                            "Closed-toe shoes required (non-slip preferred)",
                            "Name badge must be visible at all times",
                            "Hair must be tied back for food handling areas"
                        ],
                        note: "Uniforms provided by company. See your manager for sizing.",
                        links: ["‚Üí View Full Dress Code Guide"]
                    }
                },
                breaks: {
                    keywords: ['break', 'lunch', 'rest', 'meal period'],
                    content: {
                        title: "Break Policy",
                        rules: [
                            "4-6 hour shift: One 15-minute paid break",
                            "6+ hour shift: One 30-minute unpaid meal break + one 15-minute paid break",
                            "8+ hour shift: One 30-minute unpaid meal break + two 15-minute paid breaks"
                        ],
                        note: "Coordinate break times with your supervisor to ensure floor coverage.",
                        links: ["‚Üí View Break Schedule Guidelines"]
                    }
                }
            },
            locations: {
                stores: {
                    keywords: ['store', 'location', 'where', 'address', 'hours'],
                    content: {
                        title: "Store Locations",
                        stores: [
                            {name: "Store 1: Downtown (Flagship)", hours: "6 AM - 11 PM", phone: "(555) 100-1000"},
                            {name: "Store 2: Riverside Plaza", hours: "7 AM - 10 PM", phone: "(555) 100-2000"},
                            {name: "Store 3: Northgate Center", hours: "6 AM - 11 PM", phone: "(555) 100-3000"},
                            {name: "Store 4: Valley Heights (New!)", hours: "7 AM - 10 PM", phone: "(555) 100-4000"}
                        ],
                        links: ["‚Üí View Store Directory", "‚Üí Get Directions"]
                    }
                }
            },
            hr: {
                payroll: {
                    keywords: ['payroll', 'salary', 'pay', 'paycheck', 'payment', 'direct deposit', 'stub'],
                    content: {
                        title: "Payroll Information",
                        schedule: "Bi-weekly (every other Friday)",
                        next_pay: "January 3, 2026",
                        details: [
                            "Access pay stubs in the Payroll Portal",
                            "Direct deposit changes: Contact HR",
                            "Questions? Email: payroll@sandersons.com"
                        ],
                        links: ["‚Üí Open Payroll Portal"]
                    }
                },
                manager: {
                    keywords: ['manager', 'sarah', 'supervisor', 'boss', '1:1', 'one on one'],
                    content: {
                        title: "Your Manager",
                        name: "Sarah Chen",
                        role: "Regional Store Manager",
                        contact: {
                            email: "sarah.chen@sandersons.com",
                            office: "Store 1, 2nd Floor"
                        },
                        next_meeting: "January 31, 2026 at 2:00 PM",
                        links: []
                    }
                }
            },
            training: {
                courses: {
                    keywords: ['training', 'learn', 'course', 'certification', 'education'],
                    content: {
                        title: "Training & Development",
                        available: [
                            "üìö New Employee Orientation",
                            "üìö Customer Service Excellence",
                            "üìö Food Safety Certification",
                            "üìö Leadership Development",
                            "üìö Tech Skills Workshops"
                        ],
                        alert: "You have 2 required trainings due by Jan 15.",
                        links: ["‚Üí View Training Dashboard"]
                    }
                }
            },
            products: {
                produce: {
                    keywords: ['produce', 'fruit', 'vegetable', 'organic', 'fresh'],
                    content: {
                        title: "Produce Department",
                        info: [
                            "Daily deliveries arrive at 5 AM",
                            "Organic section rotates seasonally",
                            "Check expiration dates during stocking",
                            "Remove damaged items immediately"
                        ],
                        contact: "Produce Manager: Mike Torres (ext. 2341)",
                        links: ["‚Üí Produce Handling Guide", "‚Üí Seasonal Calendar"]
                    }
                },
                inventory: {
                    keywords: ['inventory', 'stock', 'count', 'reorder', 'out of stock'],
                    content: {
                        title: "Inventory Management",
                        process: [
                            "Check stock levels daily via POS system",
                            "Reorder point triggers automatic notifications",
                            "Weekly physical counts required for high-value items",
                            "Use scanner app for real-time updates"
                        ],
                        links: ["‚Üí Inventory System Login", "‚Üí Reorder Procedures"]
                    }
                }
            }
        };

        // ===== RAG-LIKE RETRIEVAL FUNCTION =====
        // Searches knowledge base and ranks results by relevance
        function retrieveKnowledge(query) {
            const queryLower = query.toLowerCase();
            const matches = [];

            // Search through all knowledge categories
            for (const category in knowledgeBase) {
                for (const topic in knowledgeBase[category]) {
                    const item = knowledgeBase[category][topic];

                    // Calculate relevance score
                    let score = 0;
                    item.keywords.forEach(keyword => {
                        if (queryLower.includes(keyword)) {
                            score += keyword.length; // Longer matches = higher score
                        }
                    });

                    if (score > 0) {
                        matches.push({
                            category,
                            topic,
                            score,
                            content: item.content
                        });
                    }
                }
            }

            // Sort by relevance (highest score first)
            matches.sort((a, b) => b.score - a.score);
            return matches;
        }

        // ===== SMART LLM-LIKE RESPONSE GENERATOR =====
        // Simulates an LLM by using retrieved knowledge + natural language generation
        function generateResponse(userMessage, retrievedKnowledge) {
            if (retrievedKnowledge.length === 0) {
                // No direct match - general helpful response
                return `I'd be happy to help you with "${userMessage}"!<br><br>` +
                       `I searched Sanderson's knowledge base but didn't find an exact match. ` +
                       `Here are some resources that might help:<br><br>` +
                       `<a href='#' class='message-link'>üìñ Employee Handbook - Full Guide</a><br>` +
                       `<a href='#' class='message-link'>üìã Operations Manual - Store Procedures</a><br>` +
                       `<a href='#' class='message-link'>‚ùì HR Portal - FAQ</a><br><br>` +
                       `üí° <em>Try asking about: policies, benefits, payroll, training, store locations, inventory, or management</em>`;
            }

            // Use the best match
            const bestMatch = retrievedKnowledge[0];
            const content = bestMatch.content;
            let response = '';

            // Format response based on content structure
            if (content.title) {
                response += `<strong>${content.title}</strong><br><br>`;
            }

            // Handle different content types dynamically
            if (content.process && Array.isArray(content.process)) {
                response += `<strong>üìã How to Request:</strong><br>`;
                content.process.forEach((step, i) => {
                    response += `${i + 1}. ${step}<br>`;
                });
                response += '<br>';
            }

            if (content.balance) {
                response += `<strong>Your Balance:</strong> ${content.balance}<br><br>`;
            }

            if (content.categories) {
                for (const cat in content.categories) {
                    response += `<strong>üè∑Ô∏è ${cat}:</strong><br>`;
                    content.categories[cat].forEach(item => {
                        response += `‚Ä¢ ${item}<br>`;
                    });
                    response += '<br>';
                }
            }

            if (content.guidelines && Array.isArray(content.guidelines)) {
                response += `<strong>Guidelines:</strong><br>`;
                content.guidelines.forEach(item => {
                    response += `‚Ä¢ ${item}<br>`;
                });
                response += '<br>';
            }

            if (content.rules && Array.isArray(content.rules)) {
                content.rules.forEach(rule => {
                    response += `‚Ä¢ ${rule}<br>`;
                });
                response += '<br>';
            }

            if (content.stores && Array.isArray(content.stores)) {
                content.stores.forEach(store => {
                    response += `üìç ${store.name}<br>`;
                    response += `   Hours: ${store.hours} | Phone: ${store.phone}<br>`;
                });
                response += '<br>';
            }

            if (content.schedule) {
                response += `‚Ä¢ Pay periods: ${content.schedule}<br>`;
            }

            if (content.next_pay) {
                response += `‚Ä¢ Next pay date: ${content.next_pay}<br>`;
            }

            if (content.details && Array.isArray(content.details)) {
                content.details.forEach(detail => {
                    response += `‚Ä¢ ${detail}<br>`;
                });
                response += '<br>';
            }

            if (content.name && content.role) {
                response += `${content.name}, ${content.role}<br><br>`;
                if (content.contact) {
                    response += `‚Ä¢ Email: ${content.contact.email}<br>`;
                    response += `‚Ä¢ Office: ${content.contact.office}<br>`;
                }
                if (content.next_meeting) {
                    response += `‚Ä¢ Next 1:1: ${content.next_meeting}<br>`;
                }
                response += '<br>';
            }

            if (content.available && Array.isArray(content.available)) {
                response += `<strong>Available Courses:</strong><br>`;
                content.available.forEach(course => {
                    response += `${course}<br>`;
                });
                response += '<br>';
            }

            if (content.info && Array.isArray(content.info)) {
                content.info.forEach(item => {
                    response += `‚Ä¢ ${item}<br>`;
                });
                response += '<br>';
            }

            if (content.process && Array.isArray(content.process) && bestMatch.topic === 'inventory') {
                response += `<strong>Process:</strong><br>`;
                content.process.forEach(step => {
                    response += `‚Ä¢ ${step}<br>`;
                });
                response += '<br>';
            }

            if (content.contact) {
                response += `<strong>Contact:</strong> ${content.contact}<br><br>`;
            }

            if (content.alert) {
                response += `‚ö†Ô∏è <strong>Reminder:</strong> ${content.alert}<br><br>`;
            }

            if (content.tips) {
                response += `üí° <em>Pro tip: ${content.tips}</em><br><br>`;
            }

            if (content.note) {
                response += `üìù <em>${content.note}</em><br><br>`;
            }

            // Add relevant links
            if (content.links && content.links.length > 0) {
                content.links.forEach(link => {
                    response += `<a href='#' class='message-link'>${link}</a><br>`;
                });
            }

            return response;
        }

        // ===== MAIN RESPONSE HANDLER =====
        // NOW POWERED BY REAL CLAUDE API! üöÄ

        // Configuration
        const API_URL = 'http://localhost:3000/api/chat';
        const USE_LOCAL_BACKEND = false; // Set to true to use real Claude API
        let conversationHistory = []; // Track conversation for context

        async function respondToMessage(userMessage) {
            if (USE_LOCAL_BACKEND) {
                // Call real Claude API via backend
                await callClaudeAPI(userMessage);
            } else {
                // Fallback to mock system
                useMockResponse(userMessage);
            }
        }

        // Call real Claude API
        async function callClaudeAPI(userMessage) {
            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: userMessage,
                        conversationHistory: conversationHistory
                    })
                });

                if (!response.ok) {
                    throw new Error(`Backend returned ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();

                if (data.success && data.message) {
                    // Add to conversation history
                    conversationHistory.push({ role: 'user', content: userMessage });
                    conversationHistory.push({ role: 'assistant', content: data.message });

                    // Keep history manageable (last 10 messages)
                    if (conversationHistory.length > 10) {
                        conversationHistory = conversationHistory.slice(-10);
                    }

                    // Display response
                    addAgentMessage(data.message);
                } else {
                    throw new Error('Invalid response from backend');
                }

            } catch (error) {
                console.error('Error calling Claude API:', error);

                // Show helpful error message
                const errorMessage = `<strong>‚ö†Ô∏è Connection Error</strong><br><br>` +
                    `I couldn't connect to the AI backend. ` +
                    `Make sure the backend server is running:<br><br>` +
                    `<code style="background: #f0f0f0; padding: 4px 8px; border-radius: 4px;">cd backend && npm start</code><br><br>` +
                    `Then refresh this page.<br><br>` +
                    `<em>Error details: ${error.message}</em>`;

                addAgentMessage(errorMessage);
            }
        }

        // Fallback mock system (same as before)
        function useMockResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();

            if (lowerMessage.match(/^(hi|hello|hey|good morning|good afternoon)$/i)) {
                const response = `Hello! üëã I'm your Sanderson's AI Assistant.<br><br>` +
                    `I can help you with:<br>` +
                    `‚Ä¢ üìã Policies & procedures<br>` +
                    `‚Ä¢ üíº Benefits & payroll<br>` +
                    `‚Ä¢ üìç Store information<br>` +
                    `‚Ä¢ üìö Training resources<br>` +
                    `‚Ä¢ üì¶ Inventory & products<br><br>` +
                    `What would you like to know?`;
                addAgentMessage(response);
                return;
            }

            if (lowerMessage.includes('help') || lowerMessage.includes('what can you')) {
                const response = "I'm your go-to assistant at Sanderson's! Here's how I can help:<br><br>" +
                    "<strong>üîç Information & Resources:</strong><br>" +
                    "‚Ä¢ Company policies (PTO, dress code, breaks)<br>" +
                    "‚Ä¢ Store locations & hours<br>" +
                    "‚Ä¢ Product & inventory info<br><br>" +
                    "<strong>üíº HR & Benefits:</strong><br>" +
                    "‚Ä¢ Benefits details & 401(k) info<br>" +
                    "‚Ä¢ Payroll & pay schedule<br>" +
                    "‚Ä¢ Manager contact info<br><br>" +
                    "<strong>üìö Training & Development:</strong><br>" +
                    "‚Ä¢ Available courses<br>" +
                    "‚Ä¢ Certification requirements<br>" +
                    "‚Ä¢ Training deadlines<br><br>" +
                    "Just ask me anything - I search through Sanderson's knowledge base to find exactly what you need!";
                addAgentMessage(response);
                return;
            }

            // Use mock RAG system
            const retrievedKnowledge = retrieveKnowledge(userMessage);
            const response = generateResponse(userMessage, retrievedKnowledge);
            addAgentMessage(response);
        }

        // Quick Task Actions - Review First
        function reviewLunch() {
            const card = document.getElementById('lunchCard');
            card.innerHTML = `
                <h4>üçΩÔ∏è Review Your Order</h4>
                <div style="background: rgba(255,255,255,0.2); padding: 14px; border-radius: 10px; margin-bottom: 14px;">
                    <p style="margin-bottom: 8px;"><strong>Item:</strong> Mediterranean Chicken Bowl</p>
                    <p style="margin-bottom: 8px;"><strong>Price:</strong> $12.50</p>
                    <p style="margin-bottom: 8px;"><strong>Location:</strong> Cafeteria B</p>
                    <p style="margin-bottom: 0;"><strong>Pickup Time:</strong> 12:30 PM</p>
                </div>
                <div class="task-actions">
                    <button class="btn btn-primary" onclick="event.stopPropagation(); confirmLunchOrder();">Confirm Order</button>
                    <button class="btn btn-secondary" onclick="event.stopPropagation(); cancelLunchReview();">Cancel</button>
                </div>
            `;
            card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function confirmLunchOrder() {
            const card = document.getElementById('lunchCard');

            // Show loading state
            card.innerHTML = `
                <h4>‚è≥ Placing Order...</h4>
                <p>Please wait while we process your order</p>
            `;

            setTimeout(() => {
                card.classList.add('completed');
                card.innerHTML = `
                    <h4>‚úÖ Order Confirmed!</h4>
                    <p><strong>Mediterranean Chicken Bowl</strong><br>
                    Pickup: 12:30 PM at Cafeteria B<br>
                    Order #: 4782<br>
                    Price: $12.50</p>
                    <div class="task-actions">
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showOrderDetails();">View Details</button>
                    </div>
                `;
                card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 1500);
        }

        function cancelLunchReview() {
            const card = document.getElementById('lunchCard');
            card.innerHTML = `
                <h4>üçΩÔ∏è Order Lunch Today</h4>
                <p><strong>Today's Special:</strong> Mediterranean Chicken Bowl with Quinoa & Fresh Veggies<br>
                ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (4.8/5) - Your favorite! Available at Cafeteria B until 2:00 PM</p>
                <div class="task-actions">
                    <button class="btn btn-primary" onclick="event.stopPropagation(); reviewLunch();">Review Order</button>
                    <button class="btn btn-secondary" onclick="event.stopPropagation(); alert('Opening cafeteria menu...');">View Menu</button>
                </div>
            `;
        }

        function showOrderDetails() {
            ensureChatVisible();

            setTimeout(() => {
                addAgentMessage("üçΩÔ∏è <strong>Order Details</strong><br><br>Item: Mediterranean Chicken Bowl<br>Price: $12.50<br>Pickup Time: 12:30 PM<br>Location: Cafeteria B<br>Order #: 4782<br><br>Need to make changes? Just let me know!");
            }, 400);
        }

        function reviewClaim() {
            const card = document.getElementById('claimCard');
            card.innerHTML = `
                <h4>üí∞ Review Reimbursement</h4>
                <div style="background: rgba(255,255,255,0.2); padding: 14px; border-radius: 10px; margin-bottom: 14px;">
                    <p style="margin-bottom: 8px;"><strong>Vendor:</strong> Staples</p>
                    <p style="margin-bottom: 8px;"><strong>Amount:</strong> $47.82</p>
                    <p style="margin-bottom: 8px;"><strong>Date:</strong> Dec 18, 2025</p>
                    <p style="margin-bottom: 0;"><strong>Category:</strong> Office Supplies</p>
                </div>
                <div class="task-actions">
                    <button class="btn btn-primary" onclick="event.stopPropagation(); confirmClaimSubmit();">Submit Claim</button>
                    <button class="btn btn-secondary" onclick="event.stopPropagation(); cancelClaimReview();">Cancel</button>
                </div>
            `;
            card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function confirmClaimSubmit() {
            const card = document.getElementById('claimCard');

            // Show loading state
            card.innerHTML = `
                <h4>üì§ Submitting Claim...</h4>
                <p>Please wait while we process your request</p>
            `;

            setTimeout(() => {
                card.classList.add('completed');
                card.innerHTML = `
                    <h4>‚úÖ Claim Submitted!</h4>
                    <p><strong>Reimbursement Request</strong><br>
                    Amount: $47.82<br>
                    Status: Pending Manager Approval<br>
                    Expected: 3-5 business days<br>
                    Claim ID: CLM-2026-001234</p>
                    <div class="task-actions">
                        <button class="btn btn-primary" onclick="event.stopPropagation(); trackClaim();">Track Status</button>
                    </div>
                `;
                card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 1500);
        }

        function cancelClaimReview() {
            const card = document.getElementById('claimCard');
            card.innerHTML = `
                <h4>üí∞ Submit Reimbursement Claim</h4>
                <p>I found a new receipt in your OneDrive: "Office Supplies - Staples" ($47.82) from Dec 18, 2025<br>
                Would you like to file a reimbursement?</p>
                <div class="task-actions">
                    <button class="btn btn-primary" onclick="event.stopPropagation(); reviewClaim();">Review & Submit</button>
                    <button class="btn btn-secondary" onclick="event.stopPropagation(); dismissClaim();">Dismiss</button>
                </div>
            `;
        }

        function dismissClaim() {
            const card = document.getElementById('claimCard');

            // Animate dismissal
            card.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';
            card.style.opacity = '0';
            card.style.transform = 'translateX(100%)';

            setTimeout(() => {
                card.remove();
            }, 500);
        }

        // ===== CONNECT FEATURES =====

        // Teammate data
        const teammateData = {
            teammate1: {
                name: 'Marcus Rodriguez',
                title: 'Store Operations Lead',
                lastContact: '18 days ago via Teams',
                location: 'Valley Heights Location',
                project: 'Inventory System Rollout',
                gradient: 'linear-gradient(135deg, #667eea, #764ba2)',
                suggestedMessage: "Hi Marcus! It's been a while since we last connected. I wanted to check in on the Inventory System Rollout at Valley Heights. How's everything progressing? Let me know if you need any support from my end. Would love to catch up soon!"
            },
            teammate2: {
                name: 'Jennifer Park',
                title: 'Marketing Coordinator',
                lastContact: '25 days ago via Email',
                location: 'Downtown Flagship',
                project: 'Holiday Campaign Planning',
                gradient: 'linear-gradient(135deg, #fa709a, #fee140)',
                suggestedMessage: "Hey Jennifer! I hope you're doing well! It's been almost a month since we last touched base. I wanted to follow up on the Holiday Campaign Planning‚Äîhow did everything turn out? I'd love to hear about the results and see if there's anything we can collaborate on for upcoming projects!"
            },
            teammate3: {
                name: 'David Thompson',
                title: 'Training & Development Manager',
                lastContact: '31 days ago via Teams',
                location: 'Regional Office',
                project: 'New Employee Onboarding Program',
                gradient: 'linear-gradient(135deg, #30cfd0, #330867)',
                suggestedMessage: "Hi David! I realized it's been over a month since we last connected. I wanted to reach out about the New Employee Onboarding Program. I've heard great feedback from new hires‚Äîamazing work! Let's sync up soon to discuss any improvements or new initiatives you're planning."
            }
        };

        function reviewTeammateMessage(teammateId) {
            const data = teammateData[teammateId];
            const card = document.getElementById(teammateId + 'Card');

            card.innerHTML = `
                <h4>üìù Review Message to ${data.name}</h4>
                <div style="background: rgba(255,255,255,0.2); padding: 14px; border-radius: 10px; margin-bottom: 14px;">
                    <p style="margin: 0 0 8px 0;"><strong>Suggested Message:</strong></p>
                    <div style="font-size: 13px; line-height: 1.6;">${data.suggestedMessage}</div>
                </div>
                <div class="task-actions">
                    <button class="btn btn-primary" onclick="event.stopPropagation(); confirmSendMessage('${teammateId}');">Send Message</button>
                    <button class="btn btn-secondary" onclick="event.stopPropagation(); cancelTeammateReview('${teammateId}');">Cancel</button>
                </div>
            `;
        }

        function confirmSendMessage(teammateId) {
            const data = teammateData[teammateId];
            const card = document.getElementById(teammateId + 'Card');

            card.innerHTML = `
                <h4>‚úÖ Message Sent!</h4>
                <p>Your message to <strong>${data.name}</strong> has been sent via Teams.<br><br>
                üì¨ Sent just now<br>
                üí¨ They'll be notified immediately</p>
            `;
            card.style.background = 'linear-gradient(135deg, #28a745, #20c997)';

            setTimeout(() => {
                card.style.transition = 'all 0.5s ease';
                card.style.opacity = '0';
                card.style.transform = 'scale(0.9)';

                setTimeout(() => {
                    card.remove();
                }, 500);
            }, 2000);
        }

        function cancelTeammateReview(teammateId) {
            const data = teammateData[teammateId];
            const card = document.getElementById(teammateId + 'Card');

            card.style.background = data.gradient;
            card.innerHTML = `
                <h4>üí¨ ${data.name}</h4>
                <p><strong>${data.title}</strong><br>
                Last contact: ${data.lastContact}<br>
                üìç ${data.location} ‚Ä¢ Shared projects: ${data.project}</p>
                <div class="task-actions">
                    <button class="btn btn-primary" onclick="event.stopPropagation(); reviewTeammateMessage('${teammateId}');">Send Catch-Up Message</button>
                </div>
            `;
        }

        // Event data
        const eventData = {
            event1: {
                name: 'Employee Appreciation Barbecue',
                date: 'January 15, 2026 ‚Ä¢ 12:00 PM - 3:00 PM',
                location: 'Downtown Flagship - Outdoor Patio Area',
                description: 'Join us for food, games, and recognition of outstanding team members!',
                gradient: 'linear-gradient(135deg, #f093fb, #f5576c)'
            },
            event2: {
                name: 'Leadership Development Workshop',
                date: 'January 22, 2026 ‚Ä¢ 9:00 AM - 4:00 PM',
                location: 'Regional Training Center',
                description: 'Enhance your management skills with interactive sessions and networking!',
                gradient: 'linear-gradient(135deg, #4facfe, #00f2fe)'
            },
            event3: {
                name: "New Year's Food Drive Kickoff",
                date: 'January 5, 2026 ‚Ä¢ 10:00 AM - 2:00 PM',
                location: 'All Store Locations',
                description: 'Help us launch our annual food drive to support local communities!',
                gradient: 'linear-gradient(135deg, #43e97b, #38f9d7)'
            }
        };

        function reviewEventRSVP(eventId) {
            const data = eventData[eventId];
            const card = document.getElementById(eventId + 'Card');

            card.innerHTML = `
                <h4>üìã Confirm RSVP for ${data.name}</h4>
                <div style="background: rgba(255,255,255,0.2); padding: 14px; border-radius: 10px; margin-bottom: 14px;">
                    <p style="margin: 0 0 6px 0;"><strong>üìÖ ${data.date}</strong></p>
                    <p style="margin: 0 0 6px 0;"><strong>üìç ${data.location}</strong></p>
                    <p style="margin: 0;">${data.description}</p>
                </div>
                <div class="task-actions">
                    <button class="btn btn-primary" onclick="event.stopPropagation(); confirmEventRSVP('${eventId}');">Confirm RSVP</button>
                    <button class="btn btn-secondary" onclick="event.stopPropagation(); cancelEventRSVP('${eventId}');">Cancel</button>
                </div>
            `;
        }

        function confirmEventRSVP(eventId) {
            const data = eventData[eventId];
            const card = document.getElementById(eventId + 'Card');

            card.innerHTML = `
                <h4>‚úÖ RSVP Confirmed!</h4>
                <p>You're registered for <strong>${data.name}</strong><br><br>
                üìÖ ${data.date.split('‚Ä¢')[0]}<br>
                üìß Calendar invite sent to your email<br>
                üîî You'll receive a reminder 1 day before</p>
            `;
            card.style.background = 'linear-gradient(135deg, #28a745, #20c997)';

            setTimeout(() => {
                card.style.transition = 'all 0.5s ease';
                card.style.opacity = '0';
                card.style.transform = 'scale(0.9)';

                setTimeout(() => {
                    card.remove();
                }, 500);
            }, 2000);
        }

        function cancelEventRSVP(eventId) {
            const data = eventData[eventId];
            const card = document.getElementById(eventId + 'Card');

            card.style.background = data.gradient;
            card.innerHTML = `
                <h4>üéâ ${data.name}</h4>
                <p><strong>${data.date}</strong><br>
                üìç ${data.location}<br>
                ${data.description}</p>
                <div class="task-actions">
                    <button class="btn btn-primary" onclick="event.stopPropagation(); reviewEventRSVP('${eventId}');">RSVP Now</button>
                </div>
            `;
        }

        function trackClaim() {
            ensureChatVisible();

            setTimeout(() => {
                addAgentMessage("üí∞ <strong>Claim Status</strong><br><br>Claim ID: CLM-2026-001234<br>Amount: $47.82<br>Status: Pending Manager Approval<br>Submitted: Today<br>Approver: Sarah Chen<br><br>You'll receive an email notification once it's approved. Average approval time is 2-3 days.");
            }, 400);
        }

        // Close modal when clicking outside
        document.addEventListener('click', (event) => {
            if (!agentModal.contains(event.target) && !fabButton.contains(event.target) && agentModal.classList.contains('active')) {
                closeModal();
            }
        });

        // Prevent modal close when clicking inside
        agentModal.addEventListener('click', (event) => {
            event.stopPropagation();
        });

        // Log successful initialization
        console.log('%cü§ñ Sanderson\'s AI Assistant loaded successfully!', 'color: #1e5631; font-size: 16px; font-weight: bold;');
        console.log('%cChat system ready. Type in the chat box to test.', 'color: #666; font-size: 14px;');
    </script>
</body>
</html>
